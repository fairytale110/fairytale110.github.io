<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">

    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net/npm/hexo-material-cdn@1.5.2/source">









    <link rel="dns-prefetch" href="https://fonts.googleapis.com">





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Balloon Picker 气球选择器 | 
        
        智灵的博客
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no">
    <meta name="description" itemprop="description" content>
    <meta name="keywords" content=",Kotlin,Custom View">
    <meta name="theme-color" content="#C2185B">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","https://cdn.jsdelivr.net/npm/hexo-material-cdn@1.5.2/source/css/material.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","https://cdn.jsdelivr.net/npm/hexo-material-cdn@1.5.2/source/css/style.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #F06292;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #F8BBD0 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #F8BBD0 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #F8BBD0 !important;
  }

  .toTop {
    background: #F06292 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #F06292;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #F06292;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #F06292;
  }

  .post-toc a:hover {
    color: #F06292;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body {
        background-color: ;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text {
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","https://cdn.jsdelivr.net/npm/hexo-material-cdn@1.5.2/source/css/material-icons.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","https://cdn.bootcss.com/jquery/2.2.0/jquery.js", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="智灵的博客">
    <meta name="msapplication-starturl" content="http://nicesky.tech/2019/11/13/Android-kt-balloon-picker/">
    <meta name="msapplication-navbutton-color" content="#C2185B">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="智灵的博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://nicesky.tech/2019/11/13/Android-kt-balloon-picker/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Balloon Picker 气球选择器 | 智灵的博客">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content>
    <meta property="og:article:tag" content="Kotlin"> <meta property="og:article:tag" content="Custom View"> 

    
        <meta property="article:published_time" content="Wed Nov 13 2019 14:43:14 GMT+0800">
        <meta property="article:modified_time" content="Tue Jun 16 2020 16:59:10 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://nicesky.tech/2019/11/13/Android-kt-balloon-picker/index.html">
    

    <!-- Structured-data for SEO -->
    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#控件拆分："><span class="post-toc-number">1.</span> <span class="post-toc-text">控件拆分：</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#绘制流程拆分"><span class="post-toc-number">2.</span> <span class="post-toc-text">绘制流程拆分</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#绘制基线和触摸块"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">绘制基线和触摸块</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#为触摸块添加动画"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">为触摸块添加动画</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#触摸块样式动画"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">触摸块样式动画</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#触摸块位移"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">触摸块位移</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#气球动画"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">气球动画</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#开始使用"><span class="post-toc-number">3.</span> <span class="post-toc-text">开始使用</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#THANKS"><span class="post-toc-number">4.</span> <span class="post-toc-text">THANKS</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(/img/daily_pic.png)">
    
            <p class="article-headline-p">
                Balloon Picker 气球选择器
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>智灵</strong>
        <span>11月 13, 2019</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Custom-View/">Custom View</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/Kotlin/">Kotlin</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Balloon Picker 气球选择器&url=http://nicesky.tech/2019/11/13/Android-kt-balloon-picker/index.html&pic=http://nicesky.tech/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=智灵的博客&title=Balloon Picker 气球选择器&summary=&pics=http://nicesky.tech/img/favicon.png&url=http://nicesky.tech/2019/11/13/Android-kt-balloon-picker/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>基于ViewGroup，用Kotlin实现的气球选择器，动态气球大小、拖拽交互，demo见文末</p>
<p align="center">
    <img src="https://github.com/fairytale110/BalloonPicker/blob/master/blogpost/image/preview.gif?raw=true" height="500">
    </p><p align="center">
        <em>preview</em>
    </p>
<p></p> 



<h2 id="控件拆分："><a href="#控件拆分：" class="headerlink" title="控件拆分："></a>控件拆分：</h2><table>
<thead>
<tr>
<th>元素</th>
<th>拆分</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td>基线</td>
<td>已选择、未选择</td>
<td>根据触摸块改变长度</td>
</tr>
<tr>
<td>触摸块</td>
<td>触摸动画、内外圆</td>
<td>触摸时，内外圆按各自约束匀速放大；结束时，内外圆按各自约束匀速缩小</td>
</tr>
<tr>
<td>气球</td>
<td>缩放、位移</td>
<td>触摸前后缩放，移动时，匀速移动，中心旋转</td>
</tr>
<tr>
<td>文本</td>
<td>描述、值回调</td>
<td>普通文本、触摸显示回调值</td>
</tr>
</tbody></table>
<h2 id="绘制流程拆分"><a href="#绘制流程拆分" class="headerlink" title="绘制流程拆分"></a>绘制流程拆分</h2><h3 id="绘制基线和触摸块"><a href="#绘制基线和触摸块" class="headerlink" title="绘制基线和触摸块"></a>绘制基线和触摸块</h3><pre><code>分别绘制选中和未选中的基线
然后绘制触摸块外圆和内圆 </code></pre><p align="center">
    <img src="https://github.com/fairytale110/BalloonPicker/blob/master/blogpost/image/%E7%BB%98%E5%88%B6%E5%9F%BA%E7%BA%BF%E5%92%8C%E8%A7%A6%E6%91%B8%E5%9D%97.png?raw=true.png" width="500">
    </p><p align="center">
        <em>绘制基线和触摸块</em>
    </p>
<p></p> 

<h3 id="为触摸块添加动画"><a href="#为触摸块添加动画" class="headerlink" title="为触摸块添加动画"></a>为触摸块添加动画</h3><h4 id="触摸块样式动画"><a href="#触摸块样式动画" class="headerlink" title="触摸块样式动画"></a>触摸块样式动画</h4><p> 以外圆圆心为中心，达到半径100像素范围内的触摸点，均可触发内圆缩放动画。</p>
<p> 1、默认触摸状态下，动画以默认半径开始匀速递增，同时刷新视图，直到最大内圆半径为止。 </p>
<p> 2、放大过程中，如果用户手指离开屏幕，触发MOVE_UP事件，则停止已有放大动画，转而执行缩小内圆半径的动画，直到达到最小内圆半径为止。</p>
<p> 3、如果缩小过程中用户再次触摸此区域，则重复执行过程1，以此达到跟随交互效果。</p>
<p> 同理，外圆的缩放规则遵循上述规则</p>
<p> 为了让动画效果更加平顺，并且不浪费太多时间在缩放过程中，我们将在缩放开始前结束已在执行中的动画，并重新计算剩余缩放过程需要的时间差，用于当前缩放过程。</p>
<p> 缩放动画时间差计算公式：</p>
<blockquote>
<p>实际动画持续时间 = 动画持续时间 * 剩余缩(放)距离/总缩(放)距离</p>
</blockquote>
 <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">val</span> remainingTime: <span class="built_in">Long</span> = <span class="keyword">when</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.increase -&gt; (duration* (thumbInnerCircleRadiusMax - thumbInnerCircleRadiusTemp)/(thumbInnerCircleRadiusMax - thumbInnerCircleRadiusDefault)).toLong()</span><br><span class="line">                <span class="keyword">else</span> -&gt; (duration* (thumbInnerCircleRadiusTemp - thumbInnerCircleRadiusDefault)/(thumbInnerCircleRadiusMax - thumbInnerCircleRadiusDefault)).toLong()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

 <p align="center">
    <img src="https://github.com/fairytale110/BalloonPicker/blob/master/blogpost/image/scaleanim.gif?raw=true" width="500">
    </p><p align="center">
        <em>触摸效果</em>
    </p>
<p></p> 

<h4 id="触摸块位移"><a href="#触摸块位移" class="headerlink" title="触摸块位移"></a>触摸块位移</h4><p>当触发MOVE_MOVE时，根据触摸坐标x差值，更新触摸块的x坐标。同时，计算出此时选择器的value，更新两侧基线状态，并执行回调。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> x = pointOfThumbTemp.x + event.x - pointOfTouchDown.x</span><br><span class="line"></span><br><span class="line">pointOfThumb = PointF( <span class="keyword">if</span> (x &gt; xOfTrackLayerEnd) xOfTrackLayerEnd  <span class="keyword">else</span> ( <span class="keyword">if</span> (x &lt; xOfTrackLayerStart) xOfTrackLayerStart <span class="keyword">else</span> x), pointOfThumbTemp.y)</span><br><span class="line"></span><br><span class="line">selectedValue = (<span class="keyword">this</span>.minValue.toFloat() + (<span class="keyword">this</span>.maxValue.toFloat() - <span class="keyword">this</span>.minValue.toFloat()) * (pointOfThumb.x - xOfTrackLayerStart) / (widthOfView - <span class="number">2</span> * xOfTrackLayerStart)).toLong()</span><br><span class="line"></span><br><span class="line">postInvalidate()</span><br><span class="line"></span><br><span class="line">listener?.callBack(selectedValue)</span><br></pre></td></tr></table></figure>

<p align="center">
    <img src="https://github.com/fairytale110/BalloonPicker/blob/master/blogpost/image/touchmotion.gif?raw=true" width="500">
    </p><p align="center">
        <em>触摸效果</em>
    </p>
<p></p> 

<h3 id="气球动画"><a href="#气球动画" class="headerlink" title="气球动画"></a>气球动画</h3><p>通过拆分：<br>1、ACTION_MOVE，当触摸坐标发生位移，气球旋转对应角度以保持风力阻挡的惯性。气球中心点到基线的垂线，与气球中心点和触点中心点 的直线的夹角，即为当前状态下的旋转角度<br>//分析图</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">locationOfThumb</span><span class="params">(pointF: <span class="type">PointF</span>)</span></span> &#123;</span><br><span class="line">       pointThumb.<span class="keyword">set</span>(pointF.x, height.toFloat() - trackLayer?.getPadding()!!)</span><br><span class="line">       <span class="keyword">val</span> b = pointF.x - trackLayer?.getPadding()!!</span><br><span class="line">       <span class="keyword">val</span> angleRoTan = -atan(b/distanceVerticalBetweenBalloonAndTrackLayer) / PI  * <span class="number">180</span></span><br><span class="line">       L(<span class="string">"angleRoTan <span class="variable">$angleRoTan</span>"</span>)</span><br><span class="line">       balloon?.rotation = <span class="keyword">if</span> (angleRoTan.toFloat() &gt; <span class="number">0F</span> ) <span class="number">0F</span> <span class="keyword">else</span> angleRoTan.toFloat()</span><br><span class="line">       postInvalidate()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p align="center">
    <img src="https://github.com/fairytale110/BalloonPicker/blob/master/blogpost/image/balloonrotation.gif?raw=true" width="500">
    </p><p align="center">
        <em>旋转气球（假装蓝色块是气球）</em>
    </p>
<p></p> 


<p>此时气球能跟着“线”被“手”带”动“了，但是气球还没有移动，“线”也没有无限长，行，我们先让气球移动起来。</p>
<p>这里需要设定一个阀值，即“线”的长度，当超过这个阀值，则气球将被“拽着”移动。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">moveBalloon</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">val</span> ptb2 = (pointThumb.x - centerOfBalloon.x).toDouble().pow(<span class="number">2.0</span>)</span><br><span class="line">   <span class="keyword">val</span> c =  sqrt (ptb2 + centerOfBalloon.y * centerOfBalloon.y)</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>直接计算“线”长来判断，但是这样需要繁琐的符号运算，这里我们可以直接找个参考数据，简化逻辑过程：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">moveBalloon</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">val</span> b = pointThumb.x - centerOfBalloon.x</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过触点与气球中心点的垂直距离的变化来判断是否需要进行“拽着”移动：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">locationOfThumb</span><span class="params">(pointF: <span class="type">PointF</span>)</span></span> &#123;</span><br><span class="line">    pointThumb.<span class="keyword">set</span>(pointF.x, height.toFloat() - trackLayer?.getPadding()!!)</span><br><span class="line">    moveBalloon()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">moveBalloon</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> b = pointThumb.x - centerOfBalloon.x</span><br><span class="line">    <span class="keyword">val</span> ins = abs(b) - (height - pointThumb.y)</span><br><span class="line">    <span class="keyword">if</span> (b != <span class="number">0F</span> &amp;&amp; ins &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">val</span> xOfBalloon = centerOfBalloon.x.toInt() - balloon?.layoutParams!!.width / <span class="number">2</span> + <span class="keyword">if</span> (b &gt; <span class="number">0</span>)  ins.toInt() <span class="keyword">else</span> - ins.toInt()</span><br><span class="line">        </span><br><span class="line">        balloon?.layout( xOfBalloon, balloon?.y!!.toInt(), xOfBalloon + balloon?.layoutParams!!.width, measuredHeight - trackLayer?.layoutParams!!.height)</span><br><span class="line">        </span><br><span class="line">        centerOfBalloon.<span class="keyword">set</span>(balloon?.x!! + balloon?.layoutParams!!.width / <span class="number">2F</span>,  balloon?.y!! + balloon?.layoutParams!!.height / <span class="number">2</span>)</span><br><span class="line">    </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//TODO moveBalloonWithAnim</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> angleRoTan = -atan(b/distanceVerticalBetweenBalloonAndTrackLayer) / PI  * <span class="number">180</span></span><br><span class="line">    L(<span class="string">"angleRoTan <span class="variable">$angleRoTan</span>"</span>)</span><br><span class="line">    balloon?.rotation = angleRoTan.toFloat()</span><br><span class="line">    postInvalidate()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p align="center">
    <img src="https://github.com/fairytale110/BalloonPicker/blob/master/blogpost/image/%E6%8B%96%E6%8B%BD%E6%B0%94%E7%90%83.gif?raw=true" width="500">
    </p><p align="center">
        <em>拖拽气球</em>
    </p>
<p></p> 

<p>此时气球已经可以被拽着走了，为了让效果更加逼真，在阀值内，我们通过动画来缓慢移动，  </p>
<p>2、同时以匀速向新的圆点移动，直到气球中心x与触摸点x重合。<br>通过监听将TrackLayer的touch数据传递给pickerView，改造了统一的接口:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">TrackLayerListener</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">fun</span> <span class="title">layerTouchedDown</span><span class="params">()</span></span></span><br><span class="line">   <span class="function"><span class="keyword">fun</span> <span class="title">layerTouchedUp</span><span class="params">()</span></span></span><br><span class="line">   <span class="function"><span class="keyword">fun</span> <span class="title">layerTouchedMoving</span><span class="params">(value : <span class="type">Long</span>, pointAtLayer : <span class="type">PointF</span>)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 layerTouchedMoving() 中处理气球的移动逻辑.</p>
<p>当球心与圆点距离小于阀值时，中断气球动画，直接布局气球在picker中的位置；否则，执行新的气球动画:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">layerTouchedMoving</span><span class="params">(value: <span class="type">Long</span>, pointAtLayer: <span class="type">PointF</span>)</span></span> &#123;</span><br><span class="line">       pointThumb.<span class="keyword">set</span>(pointAtLayer.x, height.toFloat() - trackLayer?.getPadding()!!)</span><br><span class="line">       <span class="keyword">val</span> b = pointThumb.x.toInt() - centerOfBalloon.x.toInt()</span><br><span class="line">       <span class="keyword">if</span> (abs(b) &gt; distanceVerticalBetweenBalloonAndTrackLayer.toInt())&#123;</span><br><span class="line">           initAnimation(ValueAnimator.ofInt(centerOfBalloon.x.toInt(), pointThumb.x.toInt()))</span><br><span class="line"></span><br><span class="line">           <span class="keyword">val</span> xOfBalloon = (centerOfBalloon.x - balloon?.layoutParams!!.width / <span class="number">2</span> + <span class="keyword">if</span> (b &gt; <span class="number">0</span>)  b-distanceVerticalBetweenBalloonAndTrackLayer <span class="keyword">else</span> b + distanceVerticalBetweenBalloonAndTrackLayer).toInt()</span><br><span class="line">           </span><br><span class="line">           balloon?.layout( xOfBalloon , balloon?.y!!.toInt(), xOfBalloon + balloon?.layoutParams!!.width, balloon?.y!!.toInt() +balloon?.layoutParams!!.height )</span><br><span class="line">           </span><br><span class="line">           centerOfBalloon.<span class="keyword">set</span>(xOfBalloon + balloon?.layoutParams!!.width / <span class="number">2F</span>,  balloon?.y!! + balloon?.layoutParams!!.height / <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">           rotateBalloon()</span><br><span class="line">       &#125;</span><br><span class="line">       moveBalloon()</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p align="center">
    <img src="https://github.com/fairytale110/BalloonPicker/blob/master/blogpost/image/balloonfollow.gif?raw=true" width="500">
    </p><p align="center">
        <em>拖拽气球</em>
    </p>
<p></p> 

<p>效果还可以，接下来就需要根据picker的取值来动态缩放气球，同时维持住气球的底部位置不变<br>本计划直接调用scale API， 奈何privot也需要动态控制，不然不能维持气球底部垂直位置不变。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">layerTouchedMoving</span><span class="params">(value: <span class="type">Long</span>, pointAtLayer: <span class="type">PointF</span>)</span></span> &#123;</span><br><span class="line">           <span class="comment">//...</span></span><br><span class="line">           <span class="keyword">val</span> valueAtBalloon =trackLayer?.minValue()!! +  (trackLayer?.maxValue()!! - trackLayer?.minValue()!!) *  centerOfBalloon.x/measuredWidth</span><br><span class="line">           </span><br><span class="line">           <span class="keyword">val</span> disScaleHeight = balloonHeightDefault * (valueAtBalloon - trackLayer?.minValue()!!) / (trackLayer?.maxValue()!! - trackLayer?.minValue()!!)</span><br><span class="line">           </span><br><span class="line">           <span class="keyword">val</span> disScaleWidth = balloonWidthDefault/<span class="number">2</span> * (valueAtBalloon - trackLayer?.minValue()!!) / (trackLayer?.maxValue()!! - trackLayer?.minValue()!!)</span><br><span class="line">           </span><br><span class="line">           <span class="comment">//...</span></span><br><span class="line">           balloon?.layout( xOfBalloon  , balloonDefaultY.toInt() - disScaleHeight.toInt(), xOfBalloon + balloonWidthDefault.toInt() + disScaleWidth.toInt() * <span class="number">2</span>, (balloonDefaultY + balloonHeightDefault).toInt())</span><br><span class="line">           centerOfBalloon.<span class="keyword">set</span>(xOfBalloon + disScaleWidth + balloonWidthDefault / <span class="number">2F</span>,  balloonDefaultY + balloonHeightDefault/<span class="number">2</span> - disScaleHeight/<span class="number">2</span> )</span><br><span class="line">           <span class="comment">//...</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 给气球打上辅助线，我们来看下效果：<br> </p><p align="center"><br>     <img src="https://github.com/fairytale110/BalloonPicker/blob/master/blogpost/image/balloonScale.gif?raw=true" width="500"><br>     </p><p align="center"><br>         <em>拖拽气球</em><br>     </p><br> <p></p> <p></p>
<p>4、气球显示隐藏<br>气球能动能缩放了，接下来给气球加入出入动画，</p>
<p>默认情况下，不展示气球，当ACTION_DOWN 触发，气球冲圆点渐显 &amp; 放大 &amp; 移动 到初始位置；</p>
<p>当ACTION_UP 触发，气球从当前位置 淡出 &amp; 缩小 &amp; 移动 到圆点位置</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">layerTouchedDown</span><span class="params">()</span></span> &#123;</span><br><span class="line">        balloon?.startAnimation(BalloonAnimSet.create(<span class="literal">true</span>, <span class="number">0F</span>, <span class="number">0F</span>, pointThumb.y - balloon?.y!!, <span class="number">0F</span>, context , listenerEnter))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">layerTouchedUp</span><span class="params">()</span></span> &#123;</span><br><span class="line">        balloon?.visibility = View.INVISIBLE</span><br><span class="line">        pointThumb.<span class="keyword">set</span>(trackLayer?.centerPoint()!!.x, height.toFloat() - trackLayer?.getPadding()!!)</span><br><span class="line"></span><br><span class="line">        initAnimation(ValueAnimator.ofInt(centerOfBalloon.x.toInt(), pointThumb.x.toInt()))</span><br><span class="line"></span><br><span class="line">        moveBalloon()</span><br><span class="line">        balloon?.startAnimation(BalloonAnimSet.create(<span class="literal">false</span>, <span class="number">0F</span>, <span class="number">0F</span>, <span class="number">0F</span>, pointThumb.y - balloon?.y!!, context , listenerExit))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>来看看效果吧:<br> </p><p align="center"><br>     <img src="https://github.com/fairytale110/BalloonPicker/blob/master/blogpost/image/balloonshowanim.gif?raw=true" width="500"><br>     </p><p align="center"><br>         <em>拖拽气球</em><br>     </p><br> <p></p> <p></p>
<h2 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h2><p>修饰一下，抛出必要的样式设置方法，最终效果完成：<br>//使用方法</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tech.nicesky.balloonpicker.BalloonPickerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/balloon_picker"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag"> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function">fun <span class="title">load</span><span class="params">()</span></span>&#123;</span><br><span class="line">     balloon_picker.layerValues(<span class="number">10</span>, <span class="number">50</span>, <span class="number">5</span>)</span><br><span class="line">     </span><br><span class="line">     balloon_picker.defaultValue(<span class="number">30</span>)</span><br><span class="line">     balloon_picker.setColorFoThumb(<span class="string">"#FFFFFF"</span>.toColorInt(), <span class="string">"#512DA8"</span>.toColorInt())</span><br><span class="line">     balloon_picker.setColorForLayer(<span class="string">"#512DA8"</span>.toColorInt(), <span class="string">"#BDBDBD"</span>.toColorInt())</span><br><span class="line">     balloon_picker.setColorForBalloon(<span class="string">"#512DA8"</span>.toColorInt())</span><br><span class="line">     balloon_picker.setColorForBalloonValue(<span class="string">"#FFFFFF"</span>.toColorInt())</span><br><span class="line">     balloon_picker.colorOfDesc = <span class="string">"#000000"</span>.toColorInt()</span><br><span class="line">     balloon_picker.colorOfValue = <span class="string">"#000000"</span>.toColorInt()</span><br><span class="line">     balloon_picker.desc = <span class="string">"Quantity"</span></span><br><span class="line">     balloon_picker.valueListener = object : BalloonPickerListener&#123;</span><br><span class="line">               <span class="function">override fun <span class="title">changed</span><span class="params">(value: Long)</span> </span>&#123;</span><br><span class="line">                      Log.w(<span class="string">"MainActivity"</span>,<span class="string">"value: $value"</span>)</span><br><span class="line">               &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="comment">// val valueSelected = balloon_picker.getValue()</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="THANKS"><a href="#THANKS" class="headerlink" title="THANKS"></a>THANKS</h2><p>All design and inspiration credits belongs to<br><a href="https://dribbble.com/shots/6549207-Balloon-Slider-Control" target="_blank" rel="noopener">Cuberto</a></p>
<blockquote>
<p>当然，这个控件还有很大的优化空间，欢迎诸位探讨。<br>GitHub：<a href="https://github.com/fairytale110/BalloonPicker" target="_blank" rel="noopener">https://github.com/fairytale110/BalloonPicker</a></p>
</blockquote>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 Gitalk -->
<div id="gitalk-comment">
    <!-- Gitalk 评论框 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
    var id = location.pathname;
    if (Date.parse('Wed Nov 13 2019 14:43:14 GMT+0800') - Date.parse('2018-03-01') > 0 ||
        'false' !== 'true') {
        id = md5(location.pathname)
    }
    var gitalk = new Gitalk({
        clientID: 'fbbc09874d00df75fefa',
        clientSecret: '0ba91b841b2e2b0f40be83bb92339833ba21368e',
        repo: 'fairytale110.github.io',
        owner: 'fairytale110',
        admin: ['fairytale110'],
        id: id,
        // facebook-like distraction free mode
        distractionFreeMode: false
    })
    gitalk.render('gitalk-container')
      
 <!-- 
  var gitalk = new Gitalk({
          clientID: 'fbbc09874d00df75fefa',
           clientSecret: '0ba91b841b2e2b0f40be83bb92339833ba21368e',
           repo: 'fairytale110.github.io',
            owner: 'fairytale110',
           admin: ['fairytale110'],
            // facebook-like distraction free mode
            distractionFreeMode: false
       })
  gitalk.render('gitalk-container')
-->
</script>
</div>
<style>
    #gitalk-comment {
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2020/02/04/RxJava2-入门/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2016/06/01/About_52pojie_IOS/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="智灵's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        fairytale110@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:fairytale110@qq.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2020/06/">六月 2020<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/02/">二月 2020<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/11/">十一月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/06/">六月 2016<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Android/">Android<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/Android/TensorFlow/">TensorFlow<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Linux/">Linux<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/iOS/">iOS<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/杂记/">杂记<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="关于我">
                
                关于我
            </a>
        </li>
        
    
        <li>
            <a href="/tags" title="标签云">
                
                标签云
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">8</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/fairytale110" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;智灵的博客
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","https://cdn.jsdelivr.net/npm/hexo-material-cdn@1.5.2/source/js/lazyload.min.js", true)</script>



    <script>lsloader.load("js_js","https://cdn.jsdelivr.net/npm/hexo-material-cdn@1.5.2/source/js/js.min.js", true)</script>



    <script>lsloader.load("np_js","https://cdn.jsdelivr.net/npm/hexo-material-cdn@1.5.2/source/js/nprogress.js", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#C2185B'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #C2185B, 0 0 15px #C2185B'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#C2185B',
        'border-left-color': '#C2185B'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   <!-- GitTalk -->





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->

<script type="text/ls-javascript" id="Bing-Background-script">
    queue.offer(function(){
        $('body').attr('data-original', 'https://uploadbeta.com/api/pictures/random/?key=bing');
    });
</script>


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 2018;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
